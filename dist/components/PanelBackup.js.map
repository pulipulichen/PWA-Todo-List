{"version":3,"sources":["webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.yaml","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.less","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.html?290b","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.less?e6ca","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.html","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.js?4be7","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.js","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.less?8ee4","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.vue","webpack:///./src/components/ViewConfiguration/PanelBackup/PanelBackup.yaml?96ce","webpack:///fs (ignored)","webpack:///crypto (ignored)","webpack:///stream (ignored)"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA,2BAA2B,mBAAO,CAAC,8GAAyD;AAC5F;AACA,cAAc,QAAS,0CAA0C,6BAA6B,GAAG,SAAS,sMAAsM,WAAW,mIAAmI,6BAA6B,GAAG,yBAAyB,6BAA6B,GAAG,KAAK;;;;;;;;;;;;;ACF5hB;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,oBAAoB,8CAA8C;AAClE;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC,aAAa;AACb,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,cAAc,+BAA+B;AAC7C,WAAW;AACX,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;;ACrCA;;AAEA;AACA,cAAc,mBAAO,CAAC,yhBAAwQ;AAC9R,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,gIAAmE;AACrF,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;ACVf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAA8D,CAAgB,+IAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACC3D;AACE;;AAEzB;AACA;AACA,W;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA,GAAG;AACH;;AAEA,GAAG;AACH;AACA;AACA;AACA,eAAe,2CAAI;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,gDAAgD,4CAAK;;AAErD,MAAM,2CAAI,0BAA0B,iDAAiD;AACrF,KAAK;;AAEL;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;;AAEoE;AACpE,4EAAwB;;AAEgE;AACxF,sFAAkC;;AAE8C;AAChF,kFAA8B;;AAEf,kE;;;;;;;;;;;;ACtHf;AAAA;AAAA;AAAA;AAA4U,CAAgB,0WAAG,EAAC,C;;;;;;;;;;;;ACAhW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuG;AACzC;AACL;AACwC;;;AAGjG;AACgG;AAChG,gBAAgB,2GAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACiL;AACjL,WAAW,kMAAM,iBAAiB,0MAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAgP,CAAgB,kTAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACApQ,e;;;;;;;;;;;ACAA,e;;;;;;;;;;;ACAA,e","file":"components/PanelBackup.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"input[type=\\\"file\\\"][data-v-1d218882] {\\n  display: none !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"/app/src/components/ViewConfiguration/PanelBackup/PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\",\"PanelBackup.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,wBAAA;ACCF\",\"file\":\"PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\",\"sourcesContent\":[\"input[type=\\\"file\\\"] {\\n  display: none !important;\\n}\",\"input[type=\\\"file\\\"] {\\n  display: none !important;\\n}\\n\"]}]);\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"PanelBackup ui fluid buttons\" }, [\n    _c(\n      \"button\",\n      {\n        staticClass: \"ui positive button\",\n        attrs: { type: \"button\" },\n        on: { click: _vm.backup }\n      },\n      [_vm._v(\"\\n    \" + _vm._s(_vm.$t(\"BACKUP\")) + \"\\n  \")]\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"button\",\n      {\n        staticClass: \"ui button\",\n        attrs: { type: \"button\" },\n        on: {\n          click: function($event) {\n            return _vm.$refs.FileInput.click()\n          }\n        }\n      },\n      [_vm._v(\"\\n    \" + _vm._s(_vm.$t(\"RESTORE\")) + \"\\n  \")]\n    ),\n    _vm._v(\" \"),\n    _c(\"input\", {\n      ref: \"FileInput\",\n      attrs: { type: \"file\", accept: \".ods\" },\n      on: { change: _vm.openFile }\n    })\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"15d14ca7\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./PanelBackup.html?vue&type=template&id=1d218882&scoped=true&\"","import mod from \"-!./PanelBackup.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./PanelBackup.js?vue&type=script&lang=js&\"","\r\nimport XLSX from 'xlsx'\r\nimport dayjs from 'dayjs'\r\n\r\nlet app = {\r\n  props: ['db'],\r\n  data () {    \r\n    this.$i18n.locale = this.db.localConfig.locale\r\n    return {\r\n      timeFields: [\r\n        'dueTime',\r\n        'createTime',\r\n        'modifiedTime'\r\n      ],\r\n      arrayJSONAttributes: [\r\n        'tasks'\r\n      ],\r\n      booleanFields: [\r\n        'dueTime',\r\n        'isCompleted', \r\n        'isPinned'\r\n      ]\r\n    }\r\n  },\r\n  watch: {\r\n    'db.localConfig.locale'() {\r\n      this.$i18n.locale = this.db.localConfig.locale;\r\n    },\r\n  },\r\n  computed: {\r\n    \r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  methods: {\r\n    backup () {\r\n      // A workbook is the name given to an Excel file\r\n      var wb = XLSX.utils.book_new() // make Workbook of Excel\r\n\r\n      // ---------------------\r\n\r\n      let configJSON = {}\r\n      Object.keys(this.db.localConfig).forEach(key => {\r\n        if (this.arrayJSONAttributes.indexOf(key) > -1) {\r\n          return false\r\n        }\r\n        configJSON[key] = this.db.localConfig[key]\r\n      })\r\n      this.appendConfiguration(wb, configJSON)\r\n      // ------------------\r\n\r\n      let arrayJSONfield = 'tasks'\r\n      let tasks = this.db.localConfig[arrayJSONfield]\r\n      this.appendArrayJSON(wb, tasks)\r\n      // export Excel file\r\n      \r\n      // ------------------\r\n\r\n      let filename = this.db.config.appNameID + dayjs().format('MMDD-HHmm') + '.ods' \r\n      \r\n      XLSX.writeFile(wb, filename, {type: 'file', bookType: 'ods', compression: true}) // name of the file is 'book.xlsx'\r\n    },\r\n    \r\n    // restore () {\r\n    //   window.alert(this.$t('TODO'))\r\n    // },\r\n    openFile: async function (event) {\r\n      //console.log(1);\r\n      if (!window.FileReader) {\r\n        console.error(this.$t('Browser is not compatible'))\r\n        return false // Browser is not compatible\r\n      }\r\n  \r\n      //var reader = new FileReader();\r\n  \r\n      let file = event.target.files[0]\r\n      let filename = file.name\r\n      \r\n      // this.config.loadingProgress = 0\r\n       \r\n      let data\r\n      // if (filename.endsWith('.csv')) {\r\n      //   rawData = await this.loadFileCSV(file)\r\n      // }\r\n      if (filename.endsWith('.ods')) {\r\n        data = await this.loadFileODS(file)\r\n      }\r\n      // console.log(data)\r\n      if (!data) {\r\n        return false\r\n      }\r\n      \r\n      // await this.processRawData(rawData)\r\n      // this.db.localConfig.tasks = \r\n      this.arrayJSONAttributes.forEach(field => {\r\n        // console.log(field)\r\n        this.db.localConfig[field] = this.db.localConfig[field].splice(0,0).concat(data[field])\r\n        // console.log(this.db.localConfig[field])\r\n      })\r\n      Object.keys(data.configuration).forEach(key => {\r\n        this.db.localConfig[key] = data.configuration[key]\r\n      })\r\n      this.db.config.showConfiguration = false\r\n    },\r\n    \r\n  }\r\n}\r\n\r\nimport PanelBackupMethodsRemote from './PanelBackupMethodsRemote.js'\r\nPanelBackupMethodsRemote(app)\r\n\r\nimport PanelBackupMethodsBackupSheetUtils from './PanelBackupMethodsBackupSheetUtils.js'\r\nPanelBackupMethodsBackupSheetUtils(app)\r\n\r\nimport PanelBackupMethodsSheetProcess from './PanelBackupMethodsSheetProcess.js'\r\nPanelBackupMethodsSheetProcess(app)\r\n\r\nexport default app","import mod from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./PanelBackup.html?vue&type=template&id=1d218882&scoped=true&\"\nimport script from \"./PanelBackup.js?vue&type=script&lang=js&\"\nexport * from \"./PanelBackup.js?vue&type=script&lang=js&\"\nimport style0 from \"./PanelBackup.less?vue&type=style&index=0&id=1d218882&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d218882\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./PanelBackup.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fapp%2Fsrc%2Fcomponents%2FViewConfiguration%2FPanelBackup%2FPanelBackup.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/app/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1d218882')) {\n      api.createRecord('1d218882', component.options)\n    } else {\n      api.reload('1d218882', component.options)\n    }\n    module.hot.accept(\"./PanelBackup.html?vue&type=template&id=1d218882&scoped=true&\", function () {\n      api.rerender('1d218882', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ViewConfiguration/PanelBackup/PanelBackup.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./PanelBackup.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fapp%2Fsrc%2Fcomponents%2FViewConfiguration%2FPanelBackup%2FPanelBackup.vue&lang=yaml\"; export default mod; export * from \"-!../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./PanelBackup.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=%2Fapp%2Fsrc%2Fcomponents%2FViewConfiguration%2FPanelBackup%2FPanelBackup.vue&lang=yaml\"","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}